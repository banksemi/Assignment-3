<!DOCTYPE html>
<html>
<head>

<script id="vertex-shader" type="x-shader/x-vertex">
attribute vec4 vPosition;
attribute vec4 vColor;

uniform vec4 Offset;
uniform vec4 OutlineOffset;
uniform vec4 Scale;
uniform float Rotation;

varying vec4 fColor;
void
main()
{

    gl_Position = vPosition;

    float s = sin( Rotation );
    float c = cos( Rotation );

    // 기존 오브젝트 원본 버텍스의 중점을 0,0으로 이동
    gl_Position.xy -= 500.0;

    // 사이즈 조절
    gl_Position.xy *= Scale.xy;

    // 회전
    vec4 Temp = gl_Position;
    gl_Position.x = -s * (Temp.y) + c * (Temp.x);
    gl_Position.y =  s * (Temp.x) + c * (Temp.y);


    // 0,0에서 필요한만큼 좌표 이동
    gl_Position.xy += (Offset.xy);


    gl_Position.xy = gl_Position.xy / 500.0;
    gl_Position.y = -gl_Position.y;

    gl_Position.x -= 1.0;
    gl_Position.y += 1.0;
    
    gl_Position += OutlineOffset * 0.002;
    fColor = vColor;
}   
</script>

<script id="fragment-shader" type="x-shader/x-fragment">
precision mediump float;

varying vec4 fColor;
uniform vec4 OffsetColor;
void
main()
{
    gl_FragColor = (fColor * OffsetColor) / 255.0;
}
</script>

<script type="text/javascript" src="../Common/webgl-utils.js"></script>
<script type="text/javascript" src="../Common/initShaders.js"></script>
<script type="text/javascript" src="../Common/MV.js"></script>
<script type="text/javascript" src="hw.js"></script>
<script type="text/javascript" src="DrawingObject.js"></script>

<script type="text/javascript" src="object/SkyObject/SkyObject.js"></script>
<script type="text/javascript" src="object/SkyObject/Star.js"></script>
<script type="text/javascript" src="object/SkyObject/Cloud.js"></script>

<script type="text/javascript" src="object/SkyObject/Sky.js"></script>

<script type="text/javascript" src="object/tree.js"></script>
<script type="text/javascript" src="object/meteor.js"></script>
<script type="text/javascript" src="object/ground.js"></script>
<script type="text/javascript" src="object/Weed.js"></script>
<script type="text/javascript" src="object/Animal.js"></script>
<script type="text/javascript" src="object/Light.js"></script>
<script type="text/javascript" src="object/Wall.js"></script>
<script type="text/javascript" src="object/Bush.js"></script>
<script type="text/javascript" src="object/StreetLamp.js"></script>
<script type="text/javascript" src="object/Box.js"></script>
<script type="text/javascript" src="object/Fruit.js"></script>
<script type="text/javascript" src="object/Line.js"></script>
<script type="text/javascript" src="object/Mouse.js"></script>
</head>

<body>


<canvas id="gl-canvas" width="800" height="800">
Oops ... your browser doesn't support the HTML5 canvas element
</canvas>
<input id="clock" />
<input type="range" id="clock_speed" value="1" min="0" max="5">
</body>
</html>
